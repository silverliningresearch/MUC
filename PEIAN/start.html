<html>
    <head>
		<title>Passenger Experience Survey – Arrivals</title>
    <link rel="icon" type="image/x-icon" href="images/favicon.svg">

    <script src="data/MUC_arrivals_flight_list.js"></script>
    <script src="data/MUC_departures_flight_list.js"></script>		

    <script src="data/quota_data.js"></script>
    <script src="data/invalid_cases.js"></script>
    <script src="scripts/CalculateDataArrival.js"></script>
    <script src="scripts/flight_search.js"></script>
    <script src="scripts/PrepareData.js"></script>
		<script src="scripts/CalculateData.js"></script>

    <script src="data/ASQ_Quota_Airline_Dest.js"></script>
    <script src="data/ASQ_Quota_Airlines.js"></script>
    <script src="data/ASQ_Quota_Dest.js"></script>
    <script src="scripts/PrepareData_ASQ.js"></script>
    <script src="scripts/CalculateData_ASQ.js"></script>

   <script type="text/javascript" src="https://silverliningresearch.github.io/daily_plan_data_alc/MUC_PEI_AB/data/MUC_Gate_Info.js"></script>
   <script type="text/javascript" src="https://silverliningresearch.github.io/daily_plan_data_sur_v3/MUC_PEIAN/interview_statistics.js"></script>
   <script type="text/javascript" src="https://silverliningresearch.github.io/daily_plan_data_sur_v3/MUC_PEIAN/location_percent.js"></script>
   <script type="text/javascript" src="https://silverliningresearch.github.io/daily_plan_data_sur_v3/MUC_PEIAN/location_count.js"></script>
   <script type="text/javascript" src="https://silverliningresearch.github.io/daily_plan_data_sur_v3/MUC_PEIAB/interview_statistics.js"></script>
  <script type="text/javascript" src="https://silverliningresearch.github.io/daily_plan_data_asq/MUC/Departures/interview_statistics_asq.js"></script>


    <link href="css/styles_v2.css" rel ="stylesheet" type="text/css" />
    <style>
      .table-font {
        font-size: 16px;
        /* height: 18px; */
      }

      .filter-font {
        font-size: 16px;
        /* height: 18px; */
      }

      .button {
        background-color: #4CAF50; /* Green */
        border: none;
        color: white;
        padding: 15px 32px;
        text-align: center;
        text-decoration: none;
        display: inline-block;
        font-size: 16px;
        width: 300px;
        margin: 4px 2px;
        cursor: pointer;
      }

      .red {background-color: #f44336;;} /* Red */
      .blue {background-color: #0693e3;} /* Blue */ 


      .headerbackground {background-color: #66CCFF;;} /* Blue */ 
      

      h1 {text-align: center;}


    </style>
		<script type="text/javascript" src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="text/javascript">
      //google.charts.load('current', {'packages':['table']});
      google.charts.load('current', {'packages':['table','corechart', 'controls']});
      google.charts.setOnLoadCallback(drawTable);

      function drawTable() {
        CalculateAirportAirLineReport_asq();

        CalculateAirportAirLineReport();        
        CalculateArrival();
        PreparaArrivalData();
        
        var data = new google.visualization.DataTable();

        // data.addColumn({
        //   type: 'string', 
        //   label: 'Location', 
        //   p: { className: 'fixed-column' } 
        // });

        // data.addColumn({
        //   type: 'string', 
        //   label: 'Exit (%)', 
        //   p: { className: 'fixed-column' } 
        // });

        data.addColumn('string', 'Location');
        data.addColumn('string', 'Exit (%)');
        data.addColumn('string', 'Belt (%)');
        data.addColumn('string', 'Landside (%)');
        data.addColumn('number', 'Number of interviews');

        //add data
        for (i = 0; i < quota_data.length; i++) {
          var row = quota_data[i];
            { 
                data.addRows([[
                row.Location, 
                row.Exit,
                row.Belt,
                row.Landside,
                row.Total,              
              ]],
              );
            }
          }

        //create a dashboard.
        var dashboard = new google.visualization.Dashboard(
        document.getElementById('dashboard_div'));

        //create fiter
        var tableFilter = new google.visualization.ControlWrapper({
          'controlType': 'CategoryFilter',
          'containerId': 'filter_div',
          'options': {
            'filterColumnLabel': 'Location'
          }
        });
  
        // Create table
        var tableChart = new google.visualization.ChartWrapper({
          'chartType': 'Table',
          'containerId': 'table_div',
          'options': {
            'allowHtml': true, 
            'cssClassNames': {tableCell: 'table-font', headerRow: 'headerbackground', headerCell: 'googleHeaderCell' },
            'showRowNumber': false, 'width': '40%', 'height': '40%'
          }
        });

        dashboard.bind(tableFilter, tableChart);

        var view = new google.visualization.DataView(data);
        document.getElementById("filter_div").style.display = "none";

        // 4. Use the 'ready' event for jQuery fixes
        google.visualization.events.addListener(view, 'ready', function () {
          // Ensure the header (th) also respects the width of the cells (td)
          $('.fixed-column').css({
            'width': '200px',
            'min-width': '200px',
            'max-width': '200px',
            'white-space': 'normal',
            'word-break': 'break-word'
          });
        });

        dashboard.draw(view);

        //overall_status
        var overall_status =  "PEI AB: " + "Total quota: " + total_quota;
        overall_status += " - Total completed: " + total_completed ;
        overall_status +=  " (" + total_completed_percent +  "%)" + " | " + "Data updated at: " + download_time_ab;;
        //overall_status += " - Quota completed: " + total_quota_completed;
        document.getElementById("overall_status").innerHTML =overall_status;

        //overall_status
        var overall_arrival_status =  "PEI AN: " + "Total quota: " + total_arrival_quota;
        overall_arrival_status += " - Total completed: " + total_arrival_completed;
        overall_arrival_status +=  " (" + total_arrival_completed_percent +  "%)";
        document.getElementById("overall_arrival_status").innerHTML =overall_arrival_status;

        //overall_status
        var overall_status_asq =  "ASQ: " + "Total quota: " + total_quota_asq;
        overall_status_asq += " - Total completed: " + total_completed_asq ;
        overall_status_asq +=  " (" + total_completed_percent_asq +  "%)" + " | " + "Data updated at: " + download_time_asq;;
        //overall_status += " - Quota completed: " + total_quota_completed;
        document.getElementById("overall_status_asq").innerHTML =overall_status_asq;
      }
    </script>
  </head>
  <body>

  <script>
    function start_new_interview() {
      console.log("start_new_interview");
      window.localStorage.clear();

      let url = "https://silverliningresearch.github.io/MUC/PEIAN/survey.html";
      window.location.href = url;
    }

    function resume_curent_interview() {
      console.log("resume_curent_interview");
      let url = "https://silverliningresearch.github.io/MUC/PEIAN/survey.html";
      window.location.href = url;
    }

</script>
  </br>
  <h2 align="center">Passenger Experience Survey – Arrivals</h2>
  </br>

  <div align="center">
    <button onclick="start_new_interview()" class="button red">Start a new interview</button>
    <button onclick="resume_curent_interview()" class="button blue">Resume the current interview </button>
  </div>

  <p>
	</br>
    *<strong>Resume the current interview</strong> will continue from the last question in the current interview.</br>
	</br> 
  </p>

    <div style="background-color:#66CCFF;">
      </br>
    </div>
   
    <h4 id="overall_arrival_status"></h4>
    <h4 id="overall_status"></h4>
    <h4 id="overall_status_asq"></h4>

    </br>

    <div id="dashboard_div">
      <!--Divs that will hold each control and chart-->
      <div id="filter_div"></div>
      <div id="table_div"></div>
    </div>
    </div>

  </body>
</html>
